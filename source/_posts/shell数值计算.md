---
title: shell数值计算
date: 2020-05-12 19:31:59
tags: shell
categories:
toc: true
keywords:
description:
comments: 
---
# 数学计算

shell不可以直接进行算数运算

| 算术运算符            | 说明/含义                                                |
| --------------------- | -------------------------------------------------------- |
| +、-                  | 加法（或正号）、减法（或负号）                           |
| *、/、%               | 乘法、除法、取余（取模）                                 |
| **                    | 幂运算                                                   |
| ++、--                | 自增和自减，可以放在变量的前面也可以放在变量的后面       |
| !、&&、\|\|           | 逻辑非（取反）、逻辑与（and）、逻辑或（or）              |
| <、<=、>、>=          | 比较符号（小于、小于等于、大于、大于等于）               |
| ==、!=、=             | 比较符号（相等、不相等；对于字符串，= 也可以表示相当于） |
| <<、>>                | 向左移位、向右移位                                       |
| ~、\|、 &、^          | 按位取反、按位或、按位与、按位异或                       |
| =、+=、-=、*=、/=、%= | 赋值运算符，例如 a+=1 相当于 a=a+1，a-=1 相当于 a=a-1    |





| 运算操作符/运算命令                                     | 说明                                                         |
| ------------------------------------------------------- | ------------------------------------------------------------ |
| (( ))          | 用于整数运算，效率很高，**推荐使用**。                       |
| let          | 用于整数运算，和 (()) 类似。                                 |
| $[\]    | 用于整数运算，不如 (()) 灵活。                               |
| expr       | 可用于整数运算，也可以处理字符串。比较麻烦，需要注意各种细节，不推荐使用。 |
| bc       | Linux下的一个计算器程序，可以处理整数和小数。Shell 本身只支持整数运算，想计算小数就得使用 bc 这个外部的计算器。 |
| declare -i | 将变量定义为整数，然后再进行数学运算时就不会被当做字符串了。功能有限，仅支持最基本的数学运算（加减乘除和取余），不支持逻辑运算、自增自减等，所以在实际开发中很少使用。 |

```shell
#!/bin/bash

echo $((1+1))
((a=1+2**3-4%3))
echo $a

b=$((1+2**3-4%3))
echo $b

echo $((2>1))

echo $((1==1))

echo $((a++))

if ((8>5&&1==1))
    then
        echo "条件成立"
    else
        echo "条件不成立"
fi

let a=1+1
echo $a

a=`expr 2 + 1`
echo $a
```

计算浮点数

```shell
a=3.33
b=3.3
c=$(echo "$a + $b" | bc)
d=$(echo "$a * $b" | bc)
e=$(echo "scale=5; $a / $b" | bc)
echo "c=a+b=$a+$b=$c"
echo "d=a*b=$a*$b=$d"
echo "e=a/b=$a/$b=$e"

echo "scale=2; 10/3" | bc # scale=2 表示小数点后取2位， 不加默认是0️

num1=14.5
num2=5
num3=32.4
num4=`bc << EOF
scale=4
a=($num1 / $num2)
b=($num3 / $num2)
a + b
EOF`

echo $num4
```